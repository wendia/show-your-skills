# æŠ€èƒ½äº”å­æ£‹ (Show Your Skills) è®¾è®¡æ–‡æ¡£

**ç‰ˆæœ¬**: 1.0  
**åˆ›å»ºæ—¥æœŸ**: 2026-02-22  
**é¡¹ç›®è·¯å¾„**: `~/game/show-your-skills`

---

## ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#1-é¡¹ç›®æ¦‚è¿°)
2. [æŠ€æœ¯æ¶æ„](#2-æŠ€æœ¯æ¶æ„)
3. [ç›®å½•ç»“æ„](#3-ç›®å½•ç»“æ„)
4. [æ•°æ®ç»“æ„è®¾è®¡](#4-æ•°æ®ç»“æ„è®¾è®¡)
5. [æ ¸å¿ƒé€»è¾‘å®ç°](#5-æ ¸å¿ƒé€»è¾‘å®ç°)
6. [æŠ€èƒ½ç³»ç»Ÿè®¾è®¡](#6-æŠ€èƒ½ç³»ç»Ÿè®¾è®¡)
7. [çŠ¶æ€ç®¡ç†](#7-çŠ¶æ€ç®¡ç†)
8. [ç»„ä»¶è®¾è®¡](#8-ç»„ä»¶è®¾è®¡)
9. [API æ¥å£](#9-api-æ¥å£)
10. [æ ·å¼è®¾è®¡](#10-æ ·å¼è®¾è®¡)
11. [è¿è¡Œä¸éƒ¨ç½²](#11-è¿è¡Œä¸éƒ¨ç½²)
12. [åç»­è¿­ä»£æ–¹å‘](#12-åç»­è¿­ä»£æ–¹å‘)

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 æ¸¸æˆç®€ä»‹

**æŠ€èƒ½äº”å­æ£‹**æ˜¯ä¸€æ¬¾å¸¦æŠ€èƒ½å¡çš„äº”å­æ£‹å¯¹æˆ˜æ¸¸æˆã€‚ä¸ä¼ ç»Ÿäº”å­æ£‹çš„åŒºåˆ«åœ¨äºï¼š

- æ¯å±€å¼€å§‹æ—¶ï¼ŒåŒæ–¹å„éšæœºè·å¾— **3 å¼ æŠ€èƒ½å¡**
- ç©å®¶å¯ä»¥åœ¨å¯¹å±€ä¸­ä½¿ç”¨æŠ€èƒ½å¡æ”¹å˜å±€åŠ¿
- æ¯å¼ æŠ€èƒ½å¡åªèƒ½ä½¿ç”¨ä¸€æ¬¡
- æœ€ç»ˆèƒœè´Ÿæ ‡å‡†ä¸ä¼ ç»Ÿäº”å­æ£‹ç›¸åŒï¼ˆäº”å­è¿ç è·èƒœï¼‰

### 1.2 æ ¸å¿ƒç©æ³•

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ¸¸æˆæµç¨‹                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  1. å¼€å§‹æ¸¸æˆ                                        â”‚
â”‚     â””â”€ åŒæ–¹å„è·å¾— 3 å¼ éšæœºæŠ€èƒ½å¡                    â”‚
â”‚                                                     â”‚
â”‚  2. å¯¹å±€è¿›è¡Œ                                        â”‚
â”‚     â”œâ”€ è½®æµè½å­                                     â”‚
â”‚     â””â”€ å¯é€‰æ‹©ä½¿ç”¨æŠ€èƒ½å¡                            â”‚
â”‚                                                     â”‚
â”‚  3. èƒœè´Ÿåˆ¤å®š                                        â”‚
â”‚     â””â”€ å…ˆè¾¾æˆäº”å­è¿ç è€…è·èƒœ                        â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 æŠ€æœ¯æ ˆ

| ç±»åˆ« | æŠ€æœ¯ |
|:---|:---|
| **å‰ç«¯æ¡†æ¶** | React 18 + TypeScript |
| **æ„å»ºå·¥å…·** | Vite 5 |
| **çŠ¶æ€ç®¡ç†** | Zustand 4 |
| **æ ·å¼** | CSS (å†…è”æ ·å¼) |

---

## 2. æŠ€æœ¯æ¶æ„

### 2.1 æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å‰ç«¯æ¶æ„                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    ç»„ä»¶å±‚                            â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚   â”‚
â”‚  â”‚  â”‚ GameUI  â”‚  â”‚  Board  â”‚  â”‚SkillCardâ”‚             â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚   â”‚
â”‚  â”‚  â”‚GameInfo â”‚  â”‚SkillListâ”‚                          â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â†“                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   çŠ¶æ€ç®¡ç†å±‚                         â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚              gameStore (Zustand)             â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  - gameState                                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  - selectedSkillCard                         â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  - selectMode                                â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  - previewPosition                           â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â†“                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    ä¸šåŠ¡é€»è¾‘å±‚                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚   â”‚
â”‚  â”‚  â”‚  Game   â”‚  â”‚  Skill  â”‚  â”‚  Skill  â”‚             â”‚   â”‚
â”‚  â”‚  â”‚ (core)  â”‚  â”‚Registry â”‚  â”‚  Cards  â”‚             â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â†“                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    ç±»å‹å®šä¹‰å±‚                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚              types/index.ts                  â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ•°æ®æµ

```
ç”¨æˆ·æ“ä½œ â†’ ç»„ä»¶ â†’ Store Actions â†’ æ ¸å¿ƒé€»è¾‘ â†’ æ›´æ–° State â†’ ç»„ä»¶é‡æ¸²æŸ“
```

---

## 3. ç›®å½•ç»“æ„

```
show-your-skills/
â”œâ”€â”€ package.json              # é¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json             # TypeScript é…ç½®
â”œâ”€â”€ vite.config.ts            # Vite é…ç½®
â”œâ”€â”€ index.html                # å…¥å£ HTML
â””â”€â”€ src/
    â”œâ”€â”€ main.tsx              # React å…¥å£
    â”œâ”€â”€ App.tsx               # åº”ç”¨ä¸»ç»„ä»¶
    â”œâ”€â”€ App.css               # å…¨å±€æ ·å¼
    â”‚
    â”œâ”€â”€ types/
    â”‚   â””â”€â”€ index.ts          # ç±»å‹å®šä¹‰
    â”‚
    â”œâ”€â”€ core/
    â”‚   â””â”€â”€ Game.ts           # æ¸¸æˆæ ¸å¿ƒé€»è¾‘
    â”‚
    â”œâ”€â”€ skills/
    â”‚   â”œâ”€â”€ SkillRegistry.ts  # æŠ€èƒ½æ³¨å†Œè¡¨
    â”‚   â””â”€â”€ cards/
    â”‚       â””â”€â”€ index.ts      # æŠ€èƒ½å¡å®ç°
    â”‚
    â”œâ”€â”€ store/
    â”‚   â””â”€â”€ gameStore.ts      # Zustand çŠ¶æ€ç®¡ç†
    â”‚
    â””â”€â”€ components/
        â”œâ”€â”€ GameUI.tsx        # æ¸¸æˆä¸»ç•Œé¢
        â”œâ”€â”€ Board.tsx         # æ£‹ç›˜ç»„ä»¶
        â”œâ”€â”€ GameInfo.tsx      # æ¸¸æˆä¿¡æ¯
        â””â”€â”€ SkillCard.tsx     # æŠ€èƒ½å¡ç»„ä»¶
```

---

## 4. æ•°æ®ç»“æ„è®¾è®¡

### 4.1 æ ¸å¿ƒç±»å‹å®šä¹‰

```typescript
// src/types/index.ts

// æ£‹å­é¢œè‰²
export type StoneColor = 'black' | 'white' | null;

// æ£‹ç›˜ä½ç½®
export interface Position {
  row: number;
  col: number;
}

// æ£‹å­
export interface Stone {
  position: Position;
  color: 'black' | 'white';
}

// ç©å®¶
export interface Player {
  id: string;
  name: string;
  color: 'black' | 'white';
  skillCards: SkillCard[];
}

// æŠ€èƒ½å¡
export interface SkillCard {
  id: string;
  skillId: string;
  name: string;
  description: string;
  used: boolean;
}

// æŠ€èƒ½å®šä¹‰
export interface Skill {
  id: string;
  name: string;
  description: string;
  type: 'instant' | 'passive' | 'triggered';
  execute(context: SkillContext): GameState;
  canUse(context: SkillContext): boolean;
  priority: number;
}

// æŠ€èƒ½ä¸Šä¸‹æ–‡
export interface SkillContext {
  gameState: GameState;
  currentPlayer: Player;
  targetPosition?: Position;
}

// å°é”åŒºåŸŸ
export interface BlockedZone {
  centerPosition: Position;
  expiresAfterTurn: number;
  blockedBy: 'black' | 'white';
}

// æ¸¸æˆçŠ¶æ€
export interface GameState {
  boardSize: number;
  board: StoneColor[][];
  currentPlayer: 'black' | 'white';
  players: {
    black: Player;
    white: Player;
  };
  phase: 'waiting' | 'playing' | 'ended';
  winner: 'black' | 'white' | null;
  history: GameAction[];
  turn: number;
  blockedZones: BlockedZone[];
  remainingMoves: number;
}

// æ¸¸æˆåŠ¨ä½œ
export interface GameAction {
  type: 'place' | 'skill';
  player: 'black' | 'white';
  position?: Position;
  skillId?: string;
  timestamp: number;
}

// æ¸¸æˆé…ç½®
export interface GameConfig {
  boardSize: number;
  skillCountPerPlayer: number;
  enableSkills: boolean;
}
```

### 4.2 æ•°æ®å…³ç³»å›¾

```
GameState
â”œâ”€â”€ board: StoneColor[][]          // 15x15 æ£‹ç›˜
â”œâ”€â”€ currentPlayer: 'black' | 'white'
â”œâ”€â”€ players
â”‚   â”œâ”€â”€ black: Player
â”‚   â”‚   â””â”€â”€ skillCards: SkillCard[]
â”‚   â””â”€â”€ white: Player
â”‚       â””â”€â”€ skillCards: SkillCard[]
â”œâ”€â”€ phase: 'waiting' | 'playing' | 'ended'
â”œâ”€â”€ winner: 'black' | 'white' | null
â”œâ”€â”€ history: GameAction[]
â”œâ”€â”€ turn: number
â”œâ”€â”€ blockedZones: BlockedZone[]
â””â”€â”€ remainingMoves: number
```

---

## 5. æ ¸å¿ƒé€»è¾‘å®ç°

### 5.1 æ¸¸æˆæ ¸å¿ƒ (src/core/Game.ts)

#### 5.1.1 åˆ›å»ºæ¸¸æˆçŠ¶æ€

```typescript
export function createInitialGameState(config: GameConfig = DEFAULT_CONFIG): GameState {
  return {
    boardSize: config.boardSize,
    board: createEmptyBoard(config.boardSize),
    currentPlayer: 'black',
    players: {
      black: { id: 'black', name: 'é»‘æ–¹', color: 'black', skillCards: [] },
      white: { id: 'white', name: 'ç™½æ–¹', color: 'white', skillCards: [] },
    },
    phase: 'playing',
    winner: null,
    history: [],
    turn: 1,
    blockedZones: [],
    remainingMoves: 1,
  };
}
```

#### 5.1.2 è½å­é€»è¾‘

```typescript
export function placeStone(state: GameState, position: Position): GameState | null {
  // éªŒè¯
  if (!isValidPosition(position, state.boardSize)) return null;
  if (!isEmptyPosition(state.board, position)) return null;
  if (state.phase !== 'playing') return null;
  
  // æ£€æŸ¥å°é”åŒºåŸŸ
  if (isPositionBlocked(position, state.blockedZones, state.turn)) {
    return null;
  }
  
  // æ”¾ç½®æ£‹å­
  const newBoard = state.board.map(row => [...row]);
  newBoard[position.row][position.col] = state.currentPlayer;
  
  // æ£€æŸ¥èƒœåˆ©
  const winner = checkWinner(newBoard, position, state.currentPlayer);
  
  // å¤„ç†åŒå­å’Œå›åˆåˆ‡æ¢
  const newRemainingMoves = state.remainingMoves - 1;
  const shouldSwitchPlayer = newRemainingMoves <= 0;
  
  return {
    ...state,
    board: newBoard,
    currentPlayer: shouldSwitchPlayer 
      ? (state.currentPlayer === 'black' ? 'white' : 'black') 
      : state.currentPlayer,
    history: [...state.history, { type: 'place', player: state.currentPlayer, position }],
    turn: shouldSwitchPlayer ? state.turn + 1 : state.turn,
    phase: winner ? 'ended' : 'playing',
    winner,
    remainingMoves: shouldSwitchPlayer ? 1 : newRemainingMoves,
  };
}
```

#### 5.1.3 èƒœè´Ÿåˆ¤æ–­

```typescript
export function checkWinner(
  board: StoneColor[][], 
  lastPosition: Position, 
  color: 'black' | 'white'
): 'black' | 'white' | null {
  const directions = [
    [0, 1],   // æ°´å¹³
    [1, 0],   // å‚ç›´
    [1, 1],   // å¯¹è§’çº¿
    [1, -1],  // åå¯¹è§’çº¿
  ];
  
  for (const [dr, dc] of directions) {
    let count = 1;
    
    // æ­£å‘è®¡æ•°
    for (let i = 1; i < 5; i++) {
      const r = lastPosition.row + dr * i;
      const c = lastPosition.col + dc * i;
      if (r < 0 || r >= board.length || c < 0 || c >= board.length) break;
      if (board[r][c] === color) count++;
      else break;
    }
    
    // åå‘è®¡æ•°
    for (let i = 1; i < 5; i++) {
      const r = lastPosition.row - dr * i;
      const c = lastPosition.col - dc * i;
      if (r < 0 || r >= board.length || c < 0 || c >= board.length) break;
      if (board[r][c] === color) count++;
      else break;
    }
    
    if (count >= 5) return color;
  }
  
  return null;
}
```

#### 5.1.4 å°é”åŒºåŸŸæ£€æµ‹

```typescript
export function isPositionBlocked(
  position: Position, 
  blockedZones: BlockedZone[],
  currentTurn: number
): boolean {
  for (const zone of blockedZones) {
    if (currentTurn > zone.expiresAfterTurn) continue;
    
    const rowDiff = Math.abs(position.row - zone.centerPosition.row);
    const colDiff = Math.abs(position.col - zone.centerPosition.col);
    
    if (rowDiff <= 1 && colDiff <= 1) return true;
  }
  
  return false;
}
```

---

## 6. æŠ€èƒ½ç³»ç»Ÿè®¾è®¡

### 6.1 æŠ€èƒ½æ³¨å†Œè¡¨ (src/skills/SkillRegistry.ts)

```typescript
class SkillRegistry {
  private skills: Map<string, Skill> = new Map();
  
  register(skill: Skill): void {
    this.skills.set(skill.id, skill);
  }
  
  get(id: string): Skill | undefined {
    return this.skills.get(id);
  }
  
  getAll(): Skill[] {
    return Array.from(this.skills.values());
  }
  
  // éšæœºæŠ½å–æŠ€èƒ½å¡
  drawRandom(count: number): SkillCard[] {
    const all = this.getAll();
    const shuffled = this.shuffle([...all]);
    
    return shuffled.slice(0, count).map(skill => ({
      id: `${skill.id}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
      skillId: skill.id,
      name: skill.name,
      description: skill.description,
      used: false,
    }));
  }
  
  private shuffle<T>(array: T[]): T[] {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }
}

export const skillRegistry = new SkillRegistry();
```

### 6.2 æŠ€èƒ½å¡å®ç° (src/skills/cards/index.ts)

#### 6.2.1 å€’è½¬ä¹¾å¤

```typescript
export const ReverseChaosSkill: Skill = {
  id: 'reverse_chaos',
  name: 'å€’è½¬ä¹¾å¤',
  description: 'éšæœºåè½¬æ£‹é¢ä¸Š 30% çš„æ£‹å­é¢œè‰²',
  type: 'instant',
  priority: 10,
  
  canUse(context: SkillContext): boolean {
    const stones = getAllStones(context.gameState.board);
    return stones.length >= 3;
  },
  
  execute(context: SkillContext): GameState {
    const { gameState } = context;
    const stones = getAllStones(gameState.board);
    
    const flipCount = Math.max(1, Math.floor(stones.length * 0.3));
    const shuffled = [...stones].sort(() => Math.random() - 0.5);
    const toFlip = shuffled.slice(0, flipCount).map(s => s.position);
    
    const newBoard = flipStones(gameState.board, toFlip);
    
    return { ...gameState, board: newBoard };
  },
};
```

#### 6.2.2 æ—¶é—´å›æº¯

```typescript
export const TimeWarpSkill: Skill = {
  id: 'time_warp',
  name: 'æ—¶é—´å›æº¯',
  description: 'æ’¤é”€å¯¹æ‰‹æœ€è¿‘çš„ä¸€æ­¥æ£‹',
  type: 'instant',
  priority: 20,
  
  canUse(context: SkillContext): boolean {
    return context.gameState.history.length > 0;
  },
  
  execute(context: SkillContext): GameState {
    const { gameState } = context;
    const history = gameState.history;
    
    // æ‰¾åˆ°æœ€åä¸€ä¸ªè½å­
    let lastPlaceIndex = history.length - 1;
    while (lastPlaceIndex >= 0 && history[lastPlaceIndex].type !== 'place') {
      lastPlaceIndex--;
    }
    
    if (lastPlaceIndex < 0) return gameState;
    
    const lastAction = history[lastPlaceIndex];
    const position = lastAction.position!;
    
    // ç§»é™¤æ£‹å­
    const newBoard = gameState.board.map(row => [...row]);
    newBoard[position.row][position.col] = null;
    
    const newHistory = history.slice(0, lastPlaceIndex);
    
    return {
      ...gameState,
      board: newBoard,
      history: newHistory,
      currentPlayer: lastAction.player,
      turn: gameState.turn - 1,
    };
  },
};
```

#### 6.2.3 æ£‹å­å¤åˆ¶

```typescript
export const CloneSkill: Skill = {
  id: 'clone',
  name: 'æ£‹å­å¤åˆ¶',
  description: 'åœ¨æŒ‡å®šç©ºä½æ”¾ç½®å·±æ–¹æ£‹å­',
  type: 'instant',
  priority: 15,
  
  canUse(context: SkillContext): boolean {
    const { gameState, targetPosition } = context;
    if (!targetPosition) return false;
    return gameState.board[targetPosition.row][targetPosition.col] === null;
  },
  
  execute(context: SkillContext): GameState {
    const { gameState, currentPlayer, targetPosition } = context;
    
    if (!targetPosition) return gameState;
    
    const newBoard = gameState.board.map(row => [...row]);
    newBoard[targetPosition.row][targetPosition.col] = currentPlayer.color;
    
    return {
      ...gameState,
      board: newBoard,
      currentPlayer: gameState.currentPlayer === 'black' ? 'white' : 'black',
      turn: gameState.turn + 1,
    };
  },
};
```

#### 6.2.4 åŒºåŸŸå°é”

```typescript
export const BlockZoneSkill: Skill = {
  id: 'block_zone',
  name: 'åŒºåŸŸå°é”',
  description: 'é€‰æ‹©æ£‹ç›˜ä½ç½®ï¼Œå°é”å‘¨å›´ 3x3 åŒºåŸŸä¸€å›åˆ',
  type: 'instant',
  priority: 25,
  
  canUse(context: SkillContext): boolean {
    return context.gameState.phase === 'playing';
  },
  
  execute(context: SkillContext): GameState {
    const { gameState, currentPlayer, targetPosition } = context;
    
    const centerPos: Position = targetPosition || { row: 7, col: 7 };
    
    const newBlock: BlockedZone = {
      centerPosition: centerPos,
      expiresAfterTurn: gameState.turn + 1,
      blockedBy: currentPlayer.color,
    };
    
    return {
      ...gameState,
      blockedZones: [...gameState.blockedZones, newBlock],
    };
  },
};
```

#### 6.2.5 åŒå­

```typescript
export const DoubleMoveSkill: Skill = {
  id: 'double_move',
  name: 'åŒå­',
  description: 'æœ¬å›åˆå¯ä»¥è¿ç»­è½ä¸¤å­',
  type: 'instant',
  priority: 30,
  
  canUse(context: SkillContext): boolean {
    return context.gameState.phase === 'playing' && 
           context.gameState.remainingMoves === 1;
  },
  
  execute(context: SkillContext): GameState {
    const { gameState } = context;
    
    return {
      ...gameState,
      remainingMoves: 2,
    };
  },
};
```

### 6.3 æŠ€èƒ½ä½¿ç”¨æµç¨‹

```
1. ç©å®¶ç‚¹å‡»æŠ€èƒ½å¡ã€Œä½¿ç”¨ã€æŒ‰é’®
       â†“
2. æ£€æŸ¥æ˜¯å¦éœ€è¦é€‰æ‹©ç›®æ ‡ä½ç½®
   â”œâ”€ æ˜¯ (åŒºåŸŸå°é”/æ£‹å­å¤åˆ¶) â†’ è¿›å…¥é€‰æ‹©æ¨¡å¼
   â”‚   â†“
   â”‚   ç©å®¶ç‚¹å‡»æ£‹ç›˜é€‰æ‹©ä½ç½®
   â”‚   â†“
   â””â”€ å¦ (å…¶ä»–æŠ€èƒ½) â†’ ç›´æ¥æ‰§è¡Œ
       â†“
3. gameStore.useSkill(skillCardId, targetPosition)
       â†“
4. ä» skillRegistry è·å–æŠ€èƒ½å®šä¹‰
       â†“
5. skill.canUse(context) æ£€æŸ¥æ¡ä»¶
       â†“
6. skill.execute(context) æ‰§è¡Œæ•ˆæœ
       â†“
7. æ ‡è®°æŠ€èƒ½å¡ used = true
       â†“
8. æ›´æ–°æ¸¸æˆçŠ¶æ€
```

---

## 7. çŠ¶æ€ç®¡ç†

### 7.1 Store å®šä¹‰ (src/store/gameStore.ts)

```typescript
interface GameStore {
  gameState: GameState | null;
  config: GameConfig;
  selectedSkillCard: string | null;
  selectMode: 'none' | 'blockZone' | 'clone';
  previewPosition: Position | null;
  
  startGame: () => void;
  placeStone: (position: Position) => void;
  useSkill: (skillCardId: string, targetPosition?: Position) => void;
  selectSkillCard: (skillCardId: string | null) => void;
  setSelectMode: (mode: 'none' | 'blockZone' | 'clone') => void;
  setPreviewPosition: (position: Position | null) => void;
  resetGame: () => void;
}
```

### 7.2 çŠ¶æ€æµç¨‹

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   startGame()   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   playing çŠ¶æ€                        â”‚
â”‚                                                      â”‚
â”‚   placeStone() â†â”€â”€â”€â”€â”€â”€â†’ æ™®é€šè½å­                     â”‚
â”‚        â†“                                             â”‚
â”‚   useSkill() â†â”€â”€â”€â”€â”€â”€â”€â”€â†’ ä½¿ç”¨æŠ€èƒ½                     â”‚
â”‚        â†“                                             â”‚
â”‚   selectMode â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ é€‰æ‹©æ¨¡å¼ (åŒºåŸŸå°é”/å¤åˆ¶)    â”‚
â”‚        â†“                                             â”‚
â”‚   previewPosition â”€â”€â”€â”€â”€â†’ é¢„è§ˆä½ç½®                    â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  ended çŠ¶æ€     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. ç»„ä»¶è®¾è®¡

### 8.1 GameUI (ä¸»ç•Œé¢)

```typescript
// å¸ƒå±€ç»“æ„
<div className="game-ui">
  <div className="left-panel">   {/* æ¸¸æˆä¿¡æ¯ */}
    <GameInfo />
  </div>
  
  <div className="center-panel"> {/* æ£‹ç›˜ */}
    <Board />
  </div>
  
  <div className="right-panel">  {/* æŠ€èƒ½å¡ */}
    <SkillCardList />
  </div>
</div>
```

### 8.2 Board (æ£‹ç›˜)

```typescript
// åŠŸèƒ½
- æ˜¾ç¤º 15x15 æ£‹ç›˜
- å¤„ç†ç‚¹å‡»äº‹ä»¶ (è½å­)
- å¤„ç†é¼ æ ‡æ‚¬åœ (é¢„è§ˆå°é”åŒºåŸŸ)
- æ˜¾ç¤ºå°é”åŒºåŸŸ (ç°è‰² + ğŸš«)
- æ˜¾ç¤ºé¢„è§ˆåŒºåŸŸ (åŠé€æ˜çº¢è‰²)

// Props
- æ—  (ä½¿ç”¨ useGameStore)

// å…³é”®çŠ¶æ€
- selectMode: å½“å‰é€‰æ‹©æ¨¡å¼
- previewPosition: é¢„è§ˆä½ç½®
- blockedZones: å°é”åŒºåŸŸåˆ—è¡¨
```

### 8.3 SkillCard (æŠ€èƒ½å¡)

```typescript
// åŠŸèƒ½
- æ˜¾ç¤ºæŠ€èƒ½å¡ä¿¡æ¯
- å¤„ç†ä½¿ç”¨æŒ‰é’®ç‚¹å‡»
- æ˜¾ç¤ºä½¿ç”¨çŠ¶æ€

// äº¤äº’
- ç‚¹å‡»æŒ‰é’® â†’ ä½¿ç”¨æŠ€èƒ½
- åŒºåŸŸå°é”/æ£‹å­å¤åˆ¶ â†’ è¿›å…¥é€‰æ‹©æ¨¡å¼
```

### 8.4 GameInfo (æ¸¸æˆä¿¡æ¯)

```typescript
// åŠŸèƒ½
- æ˜¾ç¤ºå½“å‰å›åˆ
- æ˜¾ç¤ºæ¸¸æˆçŠ¶æ€
- å¼€å§‹/é‡æ–°å¼€å§‹æŒ‰é’®
- æ˜¾ç¤ºæ¸¸æˆè§„åˆ™
```

---

## 9. API æ¥å£

### 9.1 å½“å‰çŠ¶æ€ (çº¯å‰ç«¯)

ç›®å‰é¡¹ç›®ä¸ºçº¯å‰ç«¯å®ç°ï¼Œæ— åç«¯ APIã€‚

### 9.2 æœªæ¥ API è®¾è®¡ (é¢„ç•™)

#### 9.2.1 æ¸¸æˆç›¸å…³

```typescript
// åˆ›å»ºæ¸¸æˆ
POST /api/games
Request: { config: GameConfig }
Response: { gameId: string, gameState: GameState }

// è·å–æ¸¸æˆçŠ¶æ€
GET /api/games/:gameId
Response: { gameState: GameState }

// è½å­
POST /api/games/:gameId/move
Request: { position: Position }
Response: { gameState: GameState }

// ä½¿ç”¨æŠ€èƒ½
POST /api/games/:gameId/skill
Request: { skillCardId: string, targetPosition?: Position }
Response: { gameState: GameState }
```

#### 9.2.2 ç©å®¶ç›¸å…³

```typescript
// åˆ›å»ºç©å®¶
POST /api/players
Request: { name: string }
Response: { playerId: string }

// åŠ å…¥æ¸¸æˆ
POST /api/games/:gameId/join
Request: { playerId: string }
Response: { gameState: GameState }
```

---

## 10. æ ·å¼è®¾è®¡

### 10.1 é¢œè‰²æ–¹æ¡ˆ

| å…ƒç´  | é¢œè‰² | è¯´æ˜ |
|:---|:---|:---|
| æ£‹ç›˜èƒŒæ™¯ | #dcb35c | æœ¨è´¨æ£•è‰² |
| é»‘å­ | #1a1a1a | æ·±è‰² |
| ç™½å­ | #f5f5f5 | æµ…è‰² |
| é¢„è§ˆåŒºåŸŸ | rgba(244, 67, 54, 0.5) | åŠé€æ˜çº¢è‰² |
| å°é”åŒºåŸŸ | #9e9e9e | ç°è‰² |
| é€‰ä¸­è¾¹æ¡† | #4CAF50 | ç»¿è‰² |
| æŒ‰é’® (é»˜è®¤) | #2196F3 | è“è‰² |
| æŒ‰é’® (é€‰ä¸­) | #4CAF50 | ç»¿è‰² |

### 10.2 ç»„ä»¶å°ºå¯¸

| ç»„ä»¶ | å°ºå¯¸ |
|:---|:---|
| æ£‹ç›˜æ ¼å­ | 36px Ã— 36px |
| æ£‹å­ | 30px (ç›´å¾„) |
| æŠ€èƒ½å¡ | 140px å®½ |
| å·¦ä¾§é¢æ¿ | 250px å®½ |
| å³ä¾§é¢æ¿ | 300px å®½ |

---

## 11. è¿è¡Œä¸éƒ¨ç½²

### 11.1 å¼€å‘ç¯å¢ƒ

```bash
cd ~/game/show-your-skills

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# è®¿é—®
# http://localhost:3000
```

### 11.2 ç”Ÿäº§æ„å»º

```bash
# æ„å»º
npm run build

# é¢„è§ˆ
npm run preview
```

### 11.3 éƒ¨ç½²é€‰é¡¹

| æ–¹æ¡ˆ | è¯´æ˜ |
|:---|:---|
| **é™æ€æ‰˜ç®¡** | npm run build åéƒ¨ç½²åˆ° Vercel/Netlify |
| **Docker** | åˆ›å»º Dockerfile ä½¿ç”¨ nginx é•œåƒ |
| **Node.js** | ä½¿ç”¨ serve æˆ– http-server |

---

## 12. åç»­è¿­ä»£æ–¹å‘

### 12.1 çŸ­æœŸ (v1.1)

| åŠŸèƒ½ | ä¼˜å…ˆçº§ | è¯´æ˜ |
|:---|:---:|:---|
| æ›´å¤šæŠ€èƒ½å¡ | â­â­â­ | å¢åŠ  5-10 ä¸ªæ–°æŠ€èƒ½ |
| æŠ€èƒ½åŠ¨ç”» | â­â­â­ | æ£‹å­ç¿»è½¬ã€æ¶ˆå¤±ç­‰åŠ¨ç”»æ•ˆæœ |
| éŸ³æ•ˆ | â­â­ | è½å­éŸ³æ•ˆã€æŠ€èƒ½éŸ³æ•ˆ |
| æ‚”æ£‹åŠŸèƒ½ | â­â­ | æ™®é€šæ‚”æ£‹ |

### 12.2 ä¸­æœŸ (v1.5)

| åŠŸèƒ½ | ä¼˜å…ˆçº§ | è¯´æ˜ |
|:---|:---:|:---|
| åŒäººåœ¨çº¿å¯¹æˆ˜ | â­â­â­â­ | WebSocket å®æ—¶åŒæ­¥ |
| æ¸¸æˆå›æ”¾ | â­â­â­ | è®°å½•å®Œæ•´å¯¹å±€ |
| æ’è¡Œæ¦œ | â­â­ | èƒœç‡ç»Ÿè®¡ |

### 12.3 é•¿æœŸ (v2.0)

| åŠŸèƒ½ | ä¼˜å…ˆçº§ | è¯´æ˜ |
|:---|:---:|:---|
| AI å¯¹æ‰‹ | â­â­â­â­â­ | å•äººæ¨¡å¼ |
| æŠ€èƒ½ç¼–è¾‘å™¨ | â­â­â­ | è‡ªå®šä¹‰æŠ€èƒ½ |
| è§‚æˆ˜æ¨¡å¼ | â­â­ | å®æ—¶è§‚æˆ˜ |

---

## é™„å½•

### A. æ–‡ä»¶æ¸…å•

| æ–‡ä»¶ | è¡Œæ•° | è¯´æ˜ |
|:---|:---:|:---|
| types/index.ts | ~80 | ç±»å‹å®šä¹‰ |
| core/Game.ts | ~150 | æ ¸å¿ƒé€»è¾‘ |
| skills/SkillRegistry.ts | ~40 | æŠ€èƒ½æ³¨å†Œè¡¨ |
| skills/cards/index.ts | ~200 | æŠ€èƒ½å®ç° |
| store/gameStore.ts | ~120 | çŠ¶æ€ç®¡ç† |
| components/*.tsx | ~400 | ç»„ä»¶ |

### B. ä¾èµ–æ¸…å•

```json
{
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "zustand": "^4.5.0",
    "uuid": "^9.0.0"
  },
  "devDependencies": {
    "@types/react": "^18.2.0",
    "@types/react-dom": "^18.2.0",
    "@vitejs/plugin-react": "^4.2.0",
    "typescript": "^5.3.0",
    "vite": "^5.0.0"
  }
}
```

---

*æ–‡æ¡£æœ€åæ›´æ–°: 2026-02-22*
